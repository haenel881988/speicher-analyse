# Änderungsprotokoll — Archiv #106–#120

> Archivierte Einträge aus dem Hauptprotokoll.

---

| # | Datum | Version | Typ | Beschreibung |
|---|-------|---------|-----|-------------|
| 120 | 2026-02-19 | v7.2.1 | feature | **PDF-Editor: Exportieren, Drucken und losgelöstes Fenster** — Issue #5 komplett umgesetzt. (1) Exportieren: "Exportieren"-Button speichert annotierte PDF unter neuem Namen via showSaveDialog mit defaultPath und PDF-Filter. (2) Drucken: "Drucken"-Button öffnet Browser-Druckdialog, @media print CSS blendet UI-Chrome aus und zeigt nur PDF-Seiten. (3) Losgelöstes Fenster: "Fenster lösen"-Button öffnet neues Tauri-Fenster (WebviewWindowBuilder) mit URL-Parameter-Routing (?pdf=encoded-path). main.tsx erkennt den Parameter und rendert PdfEditorView standalone mit AppProvider. Neuer Tauri-Command `open_pdf_window` in cmd_pdf.rs, API-Funktion `openPdfWindow` in tauri-api.ts. showSaveDialog-Backend erweitert um defaultPath und filters-Parameter. |
| 119 | 2026-02-19 | v7.2.1 | docs | **Tiefenrecherche: Migrations-Rückstände bereinigt** — Manuelle akribische Prüfung aller Projekt-Dateien auf Electron/Vanilla-JS/renderer/-Rückstände. Gefunden und behoben: cmd_network.rs Kommentar `network.js`→`NetworkView`, issue_tiefenanalyse.md archiviert (alle 25 Issues gelöst, Vanilla-JS-Ära), recherche_prompt.md v2.2→v3.0 komplett auf React+Vite+TypeScript aktualisiert (Dateistruktur, IPC-Flow, Verifikationsschritte, Anti-Pattern-Checks). Sauber: src/ (0 window.api, 0 renderer/, 0 electron), Skills, CLAUDE.md, package.json, .gitignore, tauri.conf.json, Capabilities. |
| 118 | 2026-02-19 | v7.2.1 | refactor | **React-Patterns: CustomEvent→Context, TabRouter→Conditional, dangerouslySetInnerHTML→JSX** — 10 CustomEvent/dispatchEvent-Stellen entfernt: Scan-Progress/Complete/Error via Props statt document.dispatchEvent, Theme via AppContext statt settings-theme-change Event, 5 Dead-Code-Dispatches entfernt (toggle-global-terminal, activate-omnibar, settings-pref-change, explorer-navigate, open-in-preview). TabRouter von permanent-mounting (22 Views gleichzeitig im DOM) auf conditional rendering umgestellt (nur aktiver Tab gemountet). 4 dangerouslySetInnerHTML-Stellen in ExplorerView durch FileIcon/QaIcon React-Komponenten ersetzt (file-icons.ts→file-icons.tsx). -99 Zeilen, 0 TypeScript-Fehler. |
| 117 | 2026-02-19 | v7.2.1 | refactor | **Post-Migration Cleanup: Dokumentation, Security & tote Dateien** — governance.md komplett auf React 19 + Vite 7 aktualisiert (XSS-Prävention → React JSX, Memory-Leak → useEffect-Cleanup, IPC-Architektur → src/api/tauri-api.ts). powershell-cmd SKILL: tauri-bridge.js → tauri-api.ts. stub.ts: DOM-Manipulation durch React showToast-Callback ersetzt. ExplorerView: 2 XSS-anfällige dangerouslySetInnerHTML (folder.name/drive.mountpoint in Quick-Access) durch sicheres JSX ersetzt, sizeBarHtml durch React-Komponente ersetzt. CLAUDE.md: Methodenzahl auf 150 korrigiert. Tote Dateien entfernt: app.py, models.py, scanner.py, requirements.txt, start.bat, electron-builder.yml, static/, __pycache__/. |
| 116 | 2026-02-19 | v7.2.1 | docs | **Skills, CLAUDE.md, MEMORY.md, Anforderungen auf React+Vite aktualisiert** — Alle 14 Skills in `.claude/skills/` auf React 19 + TypeScript + Vite 7 Architektur migriert (Dateipfade, Templates, Konventionen). CLAUDE.md: Tech Stack, Architektur, IPC-Muster, XSS-Prävention, Memory-Leak-Regeln auf React-Patterns aktualisiert. MEMORY.md: Kompletter Rewrite mit neuen Key Files und Lessons. anforderungen.md: Commands-Modulstruktur dokumentiert, Frontend-Referenzen aktualisiert. |
| 115 | 2026-02-19 | v7.2.1 | refactor | **Frontend-Migration: Vanilla JS → React 19 + TypeScript + Vite 7** — Big-Bang-Migration aller 36 Vanilla-JS-Dateien (~13.720 Zeilen) unter `renderer/` zu React-Komponenten unter `src/`. 23 Views als lazy-loaded React-Komponenten (React.lazy + Suspense). Typisierte API-Bridge `src/api/tauri-api.ts` mit 155 Methoden + 16 Events ersetzt `renderer/js/tauri-bridge.js`. AppContext für globalen State (scanId, drives, activeTab, showToast). useEffect-Cleanup ersetzt destroy()-Pattern. Chart.js bleibt als globales Script, xterm.js und pdfjs-dist als npm-Pakete. Backend (Rust) komplett unverändert. Alle 22 Tabs via Puppeteer verifiziert. |
| 114 | 2026-02-19 | v7.2.1 | feature | **PDF-Editor mit Annotationen, OCR und Seiten-Management** — Neuer PDF-Editor als Sidebar-Tab in der Extras-Gruppe. Bearbeitung direkt in der App: Markierungen (Highlight), Kommentare, Freihand-Zeichnungen. OCR-Texterkennung via Windows.Media.Ocr (25+ Sprachen, offline) macht gescannte PDFs durchsuchbar. Seiten-Management: Drehen, Löschen, PDFs zusammenfügen. Rendering via pdf.js (Frontend), Manipulation via PDFium/pdfium-render (Rust-Backend, Apache 2.0). 8 neue Tauri-Commands (pdf_get_info, pdf_get_annotations, pdf_save_annotations, pdf_ocr_page, pdf_add_text_layer, pdf_rotate_page, pdf_delete_pages, pdf_merge). Einstiegspunkte: Sidebar-Button, Vorschau-Bearbeiten-Button, Kontextmenü "PDF bearbeiten", Doppelklick auf PDF im Explorer. Ersetzt für 90% der Nutzer das Adobe Acrobat Pro Abo (~25€/Monat). |
| 113 | 2026-02-19 | v7.2.1 | refactor | **Bloatware-Feature komplett entfernt** — Strategische Entscheidung von Simon: Windows Defender und Microsofts MSRT decken diesen Bereich professionell ab, subjektive Klassifizierung ("ist das Bloatware?") birgt Haftungsrisiko. Backend (scan_bloatware, uninstall_bloatware), Bridge-Mappings, Frontend (bloatware.js, Sidebar-Button, CSS ~115 Zeilen), WCAG-Gate-Eintrag und System-Score-Beschreibung bereinigt. Issue #8 als ENTFALLEN markiert. |
| 112 | 2026-02-19 | v7.2.1 | feature | **PC-Diagnose — Ein-Klick Gesundheitscheck (Stufe 1.1)** — Neuer Sidebar-Tab "Diagnose" in der Start-Gruppe. Prüft parallel: Festplattenplatz, S.M.A.R.T.-Gesundheit, Datenschutz, Sicherheit. Zeigt Gesamtbewertung (0–100) mit Ampel-Kreis, 4 Kategorie-Karten mit Fortschrittsbalken und priorisierte Empfehlungen mit Direktlinks zu den betroffenen Bereichen. Nutzt ausschließlich bestehende Backend-Commands. Ergebnisse werden gecacht. |
| 111 | 2026-02-19 | v7.2.1 | improve | **Panel-Größen über Neustarts persistieren (#13)** — Sidebar-Breite, Vorschau-Breite und Terminal-Höhe werden nach manuellem Resize in localStorage gespeichert und beim nächsten App-Start wiederhergestellt. SmartLayout überschreibt manuell gesetzte Vorschau-Breite nicht mehr. Sidebar-Breite wird beim Re-Expand automatisch auf den gespeicherten Wert gesetzt. |
| 110 | 2026-02-19 | v7.2.1 | feature | **Sidebar per Drag skalierbar (#13)** — Neuer Resize-Handle am rechten Rand der expandierten Sidebar (140–400px, wie VS Code). SmartLayout wird bei manuellem Resize deaktiviert. Custom-Breite wird beim Collapse automatisch zurückgesetzt. Alle 3 Panel-Bereiche (Sidebar, Vorschau, Terminal) sind jetzt per Drag skalierbar. |
| 109 | 2026-02-19 | v7.2.1 | improve | **System-Profil erweitert** — Windows-Produktschlüssel (letzte 5 Zeichen) wird automatisch via `SoftwareLicensingProduct` ausgelesen. Hersteller-Links werden dynamisch basierend auf Gerätehersteller (Lenovo, Dell, HP, ASUS, Acer, MSI, Samsung, Microsoft), CPU-Hersteller (Intel, AMD) und GPU-Hersteller (NVIDIA, AMD/ATI) generiert. |
| 108 | 2026-02-19 | v7.2.1 | refactor | **Registry-Cleaner-Reste bereinigt** — 90 Zeilen verwaiste Registry-View-CSS aus style.css entfernt. README aktualisiert (Registry-Cleaner und Geräte-Scanner Erwähnungen entfernt). Strategische Entscheidung als "Umgesetzt" markiert — Registry-Cleaner-Commands wurden nie ins Tauri portiert (K-1 Tiefenanalyse). |
| 107 | 2026-02-19 | v7.2.1 | feature | **ZIP-Komprimierung + Scan-Performance** — Neuer `create_archive` Command (PowerShell `Compress-Archive`) mit Kontextmenü-Eintrag "Als ZIP komprimieren" für Dateien und Ordner (Mehrfachauswahl unterstützt). Scan-Daten werden jetzt mit zstd-Kompression gespeichert (~5-8x kleinere Dateien), was die Ladezeit beim App-Start deutlich reduziert. Automatische Format-Migration: alte Formate (bincode/JSON) werden beim Laden erkannt und beim nächsten Speichern als zstd geschrieben. |
| 106 | 2026-02-19 | v7.2.1 | feature | **Terminal PTY mit ConPTY** — Echtes Pseudo-Terminal via `portable-pty` v0.9 (Windows ConPTY) ersetzt die bisherige stdin/stdout-Pipe-I/O-Lösung. `terminal_resize()` ist jetzt funktional (war zuvor Stub). PTY-Reader-Thread emittiert `terminal-data` Events, EOF-Erkennung über Slave-Drop, sauberes Cleanup via `Child::kill()/wait()`. Prerequisite für zukünftige Claude Code CLI Integration. |
